# Test Plan: MS-21979 - AlertMagic: Payload Type should reflect if incident was created or updated as expected

## Issue Details
- **JIRA Issue**: MS-21979
- **Summary**: AlertMagic: Payload Type should reflect if incident was created or updated as expected
- **Priority**: Critical
- **Assignee**: Unassigned (previously Roland Banks)
- **Status**: Ready for Test
- **Component**: AlertMagic UI
- **Environment**: System: Magic Suite Production, Tenant: Marconet, Page: https://alert.magicsuite.net/payloads?tenantId=299

## Issue Background
When a ticket is created and then updated as part of the same payload, the Type column should still display "Created", even after the update. Previously, the Type column was incorrectly changing to "Updated" when the payload was modified, regardless of whether the original incident was created or updated.

**Developer Notes** (Roland Banks):
- The Type on the payload reflects whether the payload entry in the database was created or modified
- If a payload goes from processing to failure, it gets the type of "Updated"
- Significant code changes were needed to adjust this behavior

## Test Objectives
- Verify that the Type column correctly reflects whether an incident was originally **created** or **updated**
- Ensure that subsequent payload modifications do not incorrectly change the Type from "Created" to "Updated"
- Confirm that legitimate "Updated" incidents still show as "Updated"
- Validate the fix works across different payload scenarios

## Prerequisites
- Access to Magic Suite Production environment
- Access to AlertMagic UI with appropriate permissions
- Test tenant: Marconet (tenantId=299)
- Ability to create and modify test incidents
- Understanding of AlertMagic payload workflow

## Test Data Requirements
- Test incidents that can be created via AlertMagic
- Test scenarios that involve payload updates (status changes, processing states)
- Multiple payload types to verify comprehensive coverage

## Test Steps

### Test Case 1: New Incident Creation and Update
1. **Create a new incident** via AlertMagic that will generate a payload
   - Navigate to https://alert.magicsuite.net/payloads?tenantId=299
   - Trigger creation of a new incident
   - **Expected Result**: Initial payload entry shows Type = "Created"

2. **Update the same incident** (e.g., change status, add information)
   - Modify the incident to trigger a payload update
   - **Expected Result**: The original payload entry still shows Type = "Created" (should NOT change to "Updated")

3. **Verify payload history**
   - Check if additional payload entries are created for updates
   - **Expected Result**: Subsequent payload entries for the same incident should show appropriate types

### Test Case 2: Processing State Changes
1. **Create an incident that goes through processing states**
   - Create an incident that will transition from processing to another state (e.g., failure)
   - **Expected Result**: Original Type should remain "Created" even after state transitions

2. **Verify state transition payloads**
   - Observe payloads created during state changes
   - **Expected Result**: State transition payloads should show correct Type based on their nature

### Test Case 3: Legitimate Update Scenarios
1. **Update an existing incident** (not created in current session)
   - Modify a pre-existing incident
   - **Expected Result**: Should show Type = "Updated" correctly

2. **Multiple updates to existing incident**
   - Perform several updates to the same existing incident
   - **Expected Result**: Should consistently show Type = "Updated"

### Test Case 4: Edge Cases
1. **Rapid creation and update**
   - Create and immediately update an incident
   - **Expected Result**: Type should remain "Created" for original action

2. **Bulk operations**
   - Test any bulk creation/update operations if available
   - **Expected Result**: Each incident should have correct Type designation

### Test Case 5: UI Validation
1. **Column display accuracy**
   - Verify the Type column displays clearly and correctly
   - **Expected Result**: Column shows appropriate "Created" or "Updated" values

2. **Filtering and sorting**
   - Test filtering by Type column if available
   - Test sorting by Type column
   - **Expected Result**: Filtering and sorting work correctly with new logic

## Test Environment
- [x] Production (Marconet tenant)
- [ ] Staging  
- [ ] Development

## Browser Compatibility
Test in the following browsers:
- [ ] Chrome (latest)
- [ ] Firefox (latest)
- [ ] Edge (latest)
- [ ] Safari (if available)

## Test Results
- **Date**: _To be filled during test execution_
- **Tester**: _To be assigned_
- **Status**: _Pass/Fail/Blocked_
- **Build Version**: 3.28.vNext (Fix Version)
- **Notes**: _Any issues or observations_

### Test Execution Log
| Test Case | Status | Notes | Date | Tester |
|-----------|--------|-------|------|--------|
| TC1: New Incident Creation and Update | | | | |
| TC2: Processing State Changes | | | | |
| TC3: Legitimate Update Scenarios | | | | |
| TC4: Edge Cases | | | | |
| TC5: UI Validation | | | | |

## Acceptance Criteria
- ✅ Type column shows "Created" for newly created incidents and maintains this value through subsequent updates
- ✅ Type column shows "Updated" for legitimate incident updates
- ✅ No false positive changes from "Created" to "Updated"
- ✅ UI displays Type information clearly and consistently
- ✅ System performance is not negatively impacted by the changes

## Risk Assessment
- **High Risk**: Incorrect Type designation could cause confusion in incident tracking
- **Medium Risk**: Performance impact on payload processing
- **Low Risk**: UI display issues

## Rollback Plan
If critical issues are found:
1. Document the specific failure scenarios
2. Coordinate with Roland Banks for fix assessment
3. Consider temporary rollback if issues are blocking production operations

## Notes
- Issue was previously assigned to Roland Banks who implemented the fix
- Related to Epic PS-2250
- Screenshot attachment available in JIRA showing the issue
- Developer noted significant code changes were required
- Issue priority was elevated to Critical during development

## Related Issues
- **Epic**: PS-2250
- **Sprint**: Magic Suite 3.28